{"version":3,"sources":["../../src/models/scroll-handler.ts"],"names":[],"mappings":"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","file":"scroll-handler.js","sourceRoot":"","sourcesContent":["import { NgZone } from '@angular/core';\nimport { TimelineMax } from 'gsap';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\nimport { ScrollService } from '../services/scroll.service';\nimport { ScrollTriggerDirective } from '../directives/scroll-trigger/scroll-trigger.directive';\nimport { ScrollMapItem } from './scroll-map-item';\nimport * as _ from 'lodash';\n\nexport type ScrollHandlerOptions = {\n  horizontal?: boolean,\n  slides?: boolean,\n  translate?: boolean,\n  initialPosition?: number,\n  viewport?: any,\n  overrideScroll?: boolean,\n  scrollMap?: ScrollMapItem[];\n};\n\nexport class ScrollHandler {\n\n  enabled = true;\n  horizontal: boolean;\n  slides: boolean;\n  _slidesObservable = new Subject<{ forwardDirection: boolean }>();\n  translate: boolean;\n  initialPosition: number;\n  viewport: any;\n  overrideScroll: boolean;\n  _scrollMap: ScrollMapItem[];\n  lastSlideDate: Date;\n  lastSlideScrollDate: Date;\n  timeline = new TimelineMax();\n  scrollListener: any;\n  mouseWheelListener: any;\n  touchStartListener: any;\n  touchMoveListener: any;\n  touchEndListener: any;\n  resizeListener: any;\n  animatingScroll = false;\n  _position = new BehaviorSubject<number>(0);\n  _scrollMapPosition = new BehaviorSubject<{ x: number, y: number }>(undefined);\n  _viewportSize;\n  _contentSize;\n  lastTouch;\n  triggers: { trigger: ScrollTriggerDirective, activated: boolean }[] = [];\n  previousScrollPosition = 0;\n\n  constructor(private service: ScrollService,\n              public element: HTMLElement,\n              private zone: NgZone,\n              options: ScrollHandlerOptions) {\n    this.horizontal = options.horizontal || false;\n    this.slides = options.slides || false;\n    this.translate = options.translate || false;\n    this.initialPosition = options.initialPosition || 0;\n    this.viewport = options.viewport || element;\n    this.overrideScroll = options.overrideScroll || true;\n    this.scrollMap = options.scrollMap;\n\n    if (this.initialPosition) {\n      this.scrollTo(this.initialPosition, 0);\n    }\n\n    this.updateViewportSize();\n    this.updateContentSize();\n  }\n\n  set scrollMap(scrollMap) {\n    this._scrollMap = scrollMap;\n\n    if (scrollMap) {\n      this._position.next(this.element.scrollLeft + this.element.scrollTop);\n    }\n  }\n\n  addTrigger(trigger) {\n    this.triggers.push({ trigger: trigger, activated: false });\n  }\n\n  removeTrigger(trigger) {\n    this.triggers = this.triggers.filter(item => item !== trigger.trigger);\n  }\n\n  enable() {\n    this.enabled = true;\n  }\n\n  disable() {\n    this.enabled = false;\n  }\n\n  bind() {\n    this.zone.runOutsideAngular(() => {\n      this.scrollListener = () => {\n        return this.handleScrollEvent();\n      };\n\n      this.resizeListener = () => {\n        return this.handleResizeEvent();\n      };\n\n      this.viewport.addEventListener('scroll', this.scrollListener);\n      window.addEventListener('resize', this.resizeListener);\n\n      if (this.overrideScroll) {\n        if (this.mouseWheelListener) {\n          return;\n        }\n\n        this.mouseWheelListener = e => {\n          return this.handleWheelEvent(e);\n        };\n\n        this.touchStartListener = e => {\n          return this.handleTouchStartEvent(e);\n        };\n\n        this.touchMoveListener = e => {\n          return this.handleTouchMoveEvent(e);\n        };\n\n        this.touchEndListener = () => {\n          return this.handleTouchEndEvent();\n        };\n\n        document.body.addEventListener('wheel', this.mouseWheelListener);\n        document.body.addEventListener('touchstart', this.touchStartListener);\n        document.body.addEventListener('touchmove', this.touchMoveListener);\n        document.body.addEventListener('touchend', this.touchEndListener);\n      }\n    });\n  }\n\n  unbind() {\n    if (this.scrollListener) {\n      this.viewport.removeEventListener('scroll', this.scrollListener);\n    }\n\n    if (this.mouseWheelListener) {\n      document.body.removeEventListener('wheel', this.mouseWheelListener);\n    }\n\n    if (this.touchStartListener) {\n      document.body.removeEventListener('touchstart', this.touchStartListener);\n    }\n\n    if (this.touchMoveListener) {\n      document.body.removeEventListener('touchend', this.touchMoveListener);\n    }\n\n    if (this.touchEndListener) {\n      document.body.removeEventListener('touchmove', this.touchEndListener);\n    }\n\n    if (this.resizeListener) {\n      window.removeEventListener('resize', this.resizeListener);\n    }\n  }\n\n  handleScrollEvent() {\n    let scrollPosition = this.scrollPosition();\n\n    this.onScroll(scrollPosition);\n\n    if (this._position.value != scrollPosition) {\n      this._position.next(scrollPosition);\n    }\n\n    this.previousScrollPosition = scrollPosition;\n  }\n\n  handleWheelEvent(e) {\n    if (!this.service.handleAllowed(this) || !this.enabled) {\n      e.preventDefault();\n      return false;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (this.animatingScroll) {\n      return false;\n    }\n\n    let deltaX, deltaY;\n    const speed = 4;\n    const DELTA_SCALE = {\n      STANDARD: 1,\n      OTHERS: -3,\n    };\n\n    if (e['deltaX'] != undefined) {\n      const deltaModes = [1.0, 28.0, 500.0];\n      const deltaMode = deltaModes[e.deltaMode] || deltaModes[0];\n\n      deltaX = e.deltaX / DELTA_SCALE.STANDARD * deltaMode;\n      deltaY = e.deltaY / DELTA_SCALE.STANDARD * deltaMode;\n    } else if (e['wheelDeltaX'] != undefined) {\n      deltaX = e.wheelDeltaX / DELTA_SCALE.OTHERS;\n      deltaY = e.wheelDeltaY / DELTA_SCALE.OTHERS;\n    } else {\n      deltaX = 0;\n      deltaY = e.wheelDelta / DELTA_SCALE.OTHERS;\n    }\n\n    deltaX *= speed;\n    deltaY *= speed;\n\n    if (navigator.userAgent.indexOf('Mac OS X') != -1) {\n      deltaX /= 4;\n      deltaY /= 4;\n    }\n\n    deltaX = Math.round(deltaX);\n    deltaY = Math.round(deltaY);\n\n    if (this.slides) {\n      this.handleSlideScrollEvent(deltaX, deltaY);\n    } else if (this._scrollMap) {\n      this.handleScrollMapScrollEvent(deltaX, deltaY);\n    } else {\n      this.handleDefaultScrollEvent(deltaX, deltaY);\n    }\n\n    return false;\n  }\n\n  handleTouchStartEvent(e) {\n    if (!this.service.handleAllowed(this) || !this.enabled) {\n      return false;\n    }\n\n    e.stopPropagation();\n\n    if (this.animatingScroll) {\n      return false;\n    }\n\n    this.lastTouch = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n\n    return false;\n  }\n\n  handleTouchMoveEvent(e) {\n    if (!this.service.handleAllowed(this)) {\n      return false;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (this.animatingScroll) {\n      return false;\n    }\n\n    const speed = 4;\n    const touch = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n    const deltaX = Math.round(this.lastTouch.x - touch.x) * speed;\n    const deltaY = Math.round(this.lastTouch.y - touch.y) * speed;\n\n    if (this.animatingScroll) {\n      return false;\n    }\n\n    if (this.slides) {\n      this.handleSlideScrollEvent(deltaX, deltaY);\n    } else if (this._scrollMap) {\n      this.handleScrollMapScrollEvent(deltaX, deltaY);\n    } else {\n      this.handleDefaultScrollEvent(deltaX, deltaY);\n    }\n\n    this.lastTouch = touch;\n  }\n\n  handleTouchEndEvent() {\n    this.lastTouch = undefined;\n  }\n\n  handleSlideScrollEvent(deltaX, deltaY) {\n    const threshold = navigator.userAgent.indexOf('Mac OS X') != -1 ? 16 : 40;\n\n    if (this.lastSlideDate && new Date().getTime() - this.lastSlideDate.getTime() < 1000) {\n      if (new Date().getTime() - this.lastSlideScrollDate.getTime() < 200) {\n        this.lastSlideScrollDate = new Date();\n        return;\n      } else {\n        this.lastSlideDate = undefined;\n        this.lastSlideScrollDate = undefined;\n      }\n    } else {\n      this.lastSlideDate = undefined;\n      this.lastSlideScrollDate = undefined;\n    }\n\n    if (deltaX + deltaY <= 0 - threshold) {\n      this.lastSlideDate = new Date();\n      this.lastSlideScrollDate = new Date();\n\n      this._slidesObservable.next({ forwardDirection: false });\n    } else if (deltaX + deltaY >= threshold) {\n      this.lastSlideDate = new Date();\n      this.lastSlideScrollDate = new Date();\n\n      this._slidesObservable.next({ forwardDirection: true });\n    }\n  }\n\n  handleScrollMapScrollEvent(deltaX, deltaY) {\n    let delta = deltaX + deltaY;\n\n    const totalDistance = this._scrollMap\n      .map(item => item.getDistance(this.viewportSize))\n      .reduce((sum, current) => sum + current);\n\n    let position = this.scrollPosition();\n\n    this.previousScrollPosition = position;\n\n    position += delta;\n\n    if (position < 0) {\n      position = 0;\n    } else if (position > totalDistance) {\n      position = totalDistance;\n    }\n\n    this.scrollToMapPosition(position, 0.1);\n  }\n\n  handleDefaultScrollEvent(deltaX, deltaY) {\n    let delta = deltaX + deltaY;\n\n    if (this.translate) {\n      let params = this.horizontal ? { x: '-=' + delta } : { y: '-=' + delta };\n\n      this.timeline = this.timeline.clear().to(this.element, 0.3, params);\n    } else if (navigator.userAgent.indexOf('Mac OS X') != -1) {\n      if (this.horizontal) {\n        this.element.scrollLeft += delta;\n      } else {\n        this.element.scrollTop += delta;\n      }\n    } else {\n      let params = this.horizontal ? { scrollLeft: '+=' + delta } : { scrollTop: '+=' + delta };\n\n      this.timeline = this.timeline.clear().to(this.element, 0.3, params);\n    }\n  }\n\n  handleResizeEvent() {\n    this.updateViewportSize();\n    this.updateContentSize();\n    this.updateTriggerPositions();\n    this.updateScrollMapItems();\n  }\n\n  get slidesObservable(): Observable<{ forwardDirection: boolean }> {\n    return this._slidesObservable.asObservable();\n  }\n\n  scrollTo(position, duration, ease = undefined): Observable<{}> {\n    if (this._scrollMap) {\n      this.scrollToMapPosition(position, duration, ease);\n      return;\n    }\n\n    let obs = new Subject();\n    let params;\n\n    if (this.translate) {\n      params = this.horizontal ? {\n        x: 0 - position,\n        onUpdateParams: ['{self}'],\n        onUpdate: tween => {\n          this._position.next(tween.target._gsTransform.x * (-1));\n        }\n      } : {\n        y: 0 - position,\n        onUpdateParams: ['{self}'],\n        onUpdate: tween => {\n          this._position.next(tween.target._gsTransform.y * (-1));\n        }\n      };\n    } else {\n      params = this.horizontal ? { scrollLeft: position } : { scrollTop: position };\n    }\n\n    params.onComplete = () => {\n      this.animatingScroll = false;\n      obs.next();\n    };\n\n    if (ease) {\n      params.ease = ease;\n    }\n\n    this.animatingScroll = true;\n\n    if (duration) {\n      this.timeline = this.timeline.clear().to(this.element, duration, params);\n    } else {\n      this.timeline = this.timeline.clear().set(this.element, params);\n    }\n\n    return obs.asObservable();\n  }\n\n  scrollToMapPosition(position, duration, ease = undefined) {\n    let mapDistance = 0;\n    let mapPosition = { x: 0, y: 0 };\n\n    _.each(this._scrollMap, item => {\n      const distance = item.getDistance(this.viewportSize);\n      const percentage = (position - mapDistance) / distance;\n      const insidePosition = item.getPosition(this.viewportSize, percentage);\n\n      if (distance >= 0) {\n        mapDistance += distance;\n      }\n\n      mapPosition.x += insidePosition.x;\n      mapPosition.y += insidePosition.y;\n\n      if (percentage >= 0 && percentage < 1) {\n        return false;\n      }\n    });\n\n    let params = {\n      scrollLeft: mapPosition.x,\n      scrollTop: mapPosition.y\n    };\n\n    if (ease) {\n      params['ease'] = ease;\n    }\n\n    if (this._position.value != position) {\n      this._position.next(position);\n    }\n\n    if (this._scrollMapPosition.value == undefined\n      || this._scrollMapPosition.value.x !== mapPosition.x\n      || this._scrollMapPosition.value.y !== mapPosition.y) {\n      this._scrollMapPosition.next(mapPosition);\n    }\n\n    this.timeline = this.timeline.clear().to(this.element, duration, params);\n  }\n\n  scrollPosition(): number {\n    if (this.translate) {\n      return this._position.value;\n    } else if (this._scrollMap) {\n      return this._position.value;\n    } else if (this.horizontal) {\n      return this.element.scrollLeft;\n    } else {\n      return this.element.scrollTop;\n    }\n  }\n\n  get viewportSize() {\n    return this._viewportSize;\n  }\n\n  updateViewportSize() {\n    this._viewportSize = this.translate ? {\n      width: this.viewport.parentNode['clientWidth'],\n      height: this.viewport.parentNode['clientHeight']\n    } : {\n      width: this.viewport.clientWidth || this.viewport.innerWidth,\n      height: this.viewport.clientHeight || this.viewport.innerHeight\n    };\n  }\n\n  get contentSize() {\n    return this._contentSize;\n  }\n\n  updateContentSize() {\n    this._contentSize = this.translate ? {\n      width: this.element.offsetWidth,\n      height: this.element.offsetHeight\n    } : {\n      width: this.element.scrollWidth,\n      height: this.element.scrollHeight\n    };\n  }\n\n  updateTriggerPositions() {\n    const changes = this.triggers.map(trigger => trigger.trigger.updatePosition());\n\n    if (changes.filter(item => item).length) {\n      this.onScroll(this.scrollPosition());\n    }\n  }\n\n  updateScrollMapItems() {\n    if (!this._scrollMap) {\n      return;\n    }\n    this._scrollMap.forEach(item => item.onLayoutUpdated());\n  }\n\n  get position(): Observable<number> {\n    return this._position.asObservable();\n  }\n\n  get scrollMapPosition(): Observable<{ x: number, y: number }> {\n    return this._scrollMapPosition.asObservable();\n  }\n\n  get scrollMapItemPositions() {\n    let sum = 0;\n    return this._scrollMap.map(item => {\n      const distance = item.getDistance(this.viewportSize);\n      const obj = {\n        startPosition: sum,\n        endPosition: sum + distance,\n        item: item\n      };\n      sum += distance;\n      return obj;\n    });\n  }\n\n  onScroll(position) {\n    const scrollMapItems = this._scrollMap ? this.scrollMapItemPositions : undefined;\n\n    for (let trigger of this.triggers) {\n      let triggerPosition = trigger.trigger.position;\n\n      if (this._scrollMap) {\n        const scrollMapItem = _.first(scrollMapItems.filter(item => item.item === trigger.trigger.scrollMapItem));\n\n        if (scrollMapItem) {\n          triggerPosition += scrollMapItem.startPosition;\n        }\n      }\n\n      if (position >= triggerPosition && !trigger.activated) {\n        trigger.activated = true;\n        trigger.trigger.onActivated({\n          triggerPosition: triggerPosition,\n          previousScrollPosition: this.previousScrollPosition,\n          scrollPosition: position\n        });\n      } else if (position < triggerPosition && trigger.activated) {\n        trigger.activated = false;\n        trigger.trigger.onDeactivated({\n          triggerPosition: triggerPosition,\n          previousScrollPosition: this.previousScrollPosition,\n          scrollPosition: position\n        });\n      }\n    }\n  }\n}\n"]}