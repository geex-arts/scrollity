{"version":3,"sources":["../../../src/models/handlers/default-scroll-handler.ts"],"names":[],"mappings":"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","file":"default-scroll-handler.js","sourceRoot":"","sourcesContent":["import { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\n\nimport { ScrollHandler } from './scroll-handler';\n\nexport class DefaultScrollHandler extends ScrollHandler {\n\n  getInstantPosition(): number {\n    return this.horizontal ? this.element.scrollLeft : this.element.scrollTop;\n  }\n\n  handleScrollEvent(deltaX, deltaY, duration, ease = undefined) {\n    let delta = deltaX + deltaY;\n\n    if (this.preventScroll(delta)) {\n      return;\n    }\n\n    const estimatedPosition = this._position.value + delta;\n    const position = this.normalizePosition(estimatedPosition);\n\n    this.scrollTo(position, duration, ease, true);\n\n    if (estimatedPosition > position) {\n      this._scrollOverflow.next(estimatedPosition - position);\n    } else if (estimatedPosition < 0) {\n      this._scrollOverflow.next(estimatedPosition);\n    }\n  }\n\n  scrollTo(position, duration, ease = undefined, cancellable = false): Observable<{}> {\n    if (!cancellable) {\n      this.animatingScroll = true;\n    }\n\n    this.previousScrollPosition = this.position;\n\n    if (position != this._position.value) {\n      this._position.next(position);\n    }\n\n    let params;\n    let obs = new Subject();\n\n    if (this.translate) {\n      params = this.horizontal ? { x: position } : { y: position };\n    } else {\n      params = this.horizontal ? { scrollLeft: position } : { scrollTop: position };\n    }\n\n    if (ease) {\n      params['ease'] = ease;\n    }\n\n    params['onComplete'] = () => {\n      obs.next();\n\n      if (!cancellable) {\n        this.animatingScroll = false;\n      }\n    };\n\n    if (duration) {\n      this.timeline = this.timeline.clear().to(this.element, duration, params);\n    } else {\n      this.timeline = this.timeline.clear().set(this.element, params);\n    }\n\n    obs.subscribe(() => {\n      position = this._position.value;\n\n      if (position > this.getInstantPosition()) {\n        this.updateContentSize();\n      }\n    });\n\n    return obs;\n  }\n}\n"]}