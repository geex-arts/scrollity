{"version":3,"sources":["../../src/services/scroll.service.ts"],"names":[],"mappings":";;AAAA,sCAAmD;AAEnD,0BAA4B;AAU5B;IAIE,uBAAoB,IAAY;QAAZ,SAAI,GAAJ,IAAI,CAAQ;QAFhC,aAAQ,GAA4B,EAAE,CAAC;IAEH,CAAC;IAErC,wCAAgB,GAAhB,UAAiB,KAAK,EAAE,OAAsB;QAC5C,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;QACvB,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACzB,OAAO,CAAC,MAAM,EAAE,CAAC;QAEjB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAEvD,OAAO,CAAC,IAAI,EAAE,CAAC;QAEf,MAAM,CAAC,OAAO,CAAC;IACjB,CAAC;IAED,2CAAmB,GAAnB,UAAoB,KAAK;QACvB,IAAI,qBAAqB,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,KAAK,KAAK,KAAK,EAApB,CAAoB,CAAC,CAAC,CAAC;QAEvF,EAAE,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;YAC1B,qBAAqB,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;QACzC,CAAC;QAED,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,KAAK,qBAAqB,EAA9B,CAA8B,CAAC,CAAC;IAC/E,CAAC;IAED,qCAAa,GAAb,UAAc,OAAsB;QAClC,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjC,MAAM,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,OAAO,CAAC;IAC1C,CAAC;IAED,gCAAQ,GAAR,UAAS,QAAQ,EAAE,QAAQ,EAAE,IAAgB;QAAhB,qBAAA,EAAA,gBAAgB;QAC3C,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEjC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACV,MAAM,CAAC;QACT,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;IACzD,CAAC;IAED,sCAAc,GAAd;QACE,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEjC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACV,MAAM,CAAC;QACT,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;IACvC,CAAC;IACI,wBAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,iBAAU,EAAE;KACnB,CAAC;IACF,kBAAkB;IACX,4BAAc,GAAmE,cAAM,OAAA;QAC9F,EAAC,IAAI,EAAE,aAAM,GAAG;KACf,EAF6F,CAE7F,CAAC;IACF,oBAAC;CA3DD,AA2DC,IAAA;AA3DY,sCAAa","file":"scroll.service.js","sourceRoot":"","sourcesContent":["import { Injectable, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport * as _ from 'lodash';\n\nimport { ScrollHandler } from '../models/handlers/scroll-handler';\n\nexport type DocumentScrollHandler = {\n  owner: any,\n  handler: ScrollHandler\n};\n\n\nexport class ScrollService {\n\n  handlers: DocumentScrollHandler[] = [];\n\n  constructor(private zone: NgZone) { }\n\n  addScrollHandler(owner, handler: ScrollHandler): ScrollHandler {\n    handler.service = this;\n    handler.zone = this.zone;\n    handler.onInit();\n\n    this.handlers.push({ owner: owner, handler: handler });\n\n    handler.bind();\n\n    return handler;\n  }\n\n  removeScrollHandler(owner) {\n    let documentScrollHandler = _.last(this.handlers.filter(item => item.owner === owner));\n\n    if (documentScrollHandler) {\n      documentScrollHandler.handler.unbind();\n    }\n\n    this.handlers = this.handlers.filter(item => item !== documentScrollHandler);\n  }\n\n  handleAllowed(handler: ScrollHandler) {\n    let last = _.last(this.handlers);\n    return last && last.handler === handler;\n  }\n\n  scrollTo(position, duration, ease = undefined): Observable<{}> {\n    let last = _.last(this.handlers);\n\n    if (!last) {\n      return;\n    }\n\n    return last.handler.scrollTo(position, duration, ease);\n  }\n\n  scrollPosition() {\n    let last = _.last(this.handlers);\n\n    if (!last) {\n      return;\n    }\n\n    return last.handler.scrollPosition();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NgZone, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}